<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">

<head>
    <title th:text="${profile.nickname + ' λ‹μ ν”„λ΅ν•„'}"></title>
    <th:block layout:fragment="css">
        <link rel="stylesheet" th:href="@{/css/otherProfile.css}">
    </th:block>
</head>

<main layout:fragment="content">

    <div class="profile-wrapper">

        <h2 class="mypage-title" th:text="${profile.nickname + ' λ‹μ ν”„λ΅ν•„'}"></h2>

        <div class="profile-card">

            <div class="profile-banner"></div>

            <div class="profile-content">
                <div class="profile-header">
                    <div class="profile-img-wrapper">
                        <img class="profile-img"
                             th:src="${profile.profileImageUrl != null ? profile.profileImageUrl : '/images/user-default.png'}">
                    </div>

                    <div class="profile-text">
                        <div class="name-row">
                            <h3 class="profile-name" th:text="${profile.nickname}"></h3>

                            <span class="goal-badge"
                                  th:text="${profile.mainGoal == 0 ? 'πƒ λ‹¤μ΄μ–΄νΈ' :
                                       profile.mainGoal == 1 ? 'π’ λ²ν¬μ—…' : 'π¥— κ±΄κ°•κ΄€λ¦¬'}">
                            </span>
                        </div>

                        <p class="email-text" th:text="${profile.email}"></p>

                        <div class="profile-meta">
                            <span>κ°€μ…μΌ: <span th:text="${#temporals.format(profile.createdAt,'yyyy.MM.dd')}"></span></span>
                            <span class="divider">|</span>
                            <span>μ„±λ³„: <span th:text="${profile.gender == 'M' ? 'λ‚¨μ„±' : 'μ—¬μ„±'}"></span></span>
                        </div>
                    </div>
                </div>

                <div class="profile-stats">
                    <div class="stat-box">
                        <span class="label">ν‚¤</span>
                        <strong class="value" th:text="${profile.height} + ' cm'">180 cm</strong>
                    </div>
                    <div class="stat-box">
                        <span class="label">μ²΄μ¤‘</span>
                        <strong class="value" th:text="${profile.currentWeight} + ' kg'">75 kg</strong>
                    </div>
                    <div class="stat-box">
                        <span class="label">BMI</span>
                        <strong class="value bmi-value" th:text="${profile.bmi}">23.1</strong>
                    </div>
                    <div class="stat-box">
                        <span class="label">μ‹λ‹¨ μ ν•</span>
                        <strong class="value type-value"
                                th:text="${dietType != null ? dietType : 'λ―Έλ¶„μ„'}">μ €νƒ„κ³ μ§€</strong>
                    </div>
                </div>

            </div>
        </div>


        <section class="badge-section">
            <h3>νλ“ λ±ƒμ§€</h3>

            <div class="badge-grid">
                <div th:if="${#lists.isEmpty(badges)}" class="empty-state">
                    μ•„μ§ νλ“ν• λ±ƒμ§€κ°€ μ—†μµλ‹λ‹¤.
                </div>

                <div class="badge-card" th:each="b : ${badges}">
                    <div class="badge-icon-wrapper">
                        <img th:src="${b.imageUrl}">
                    </div>
                    <div class="badge-info">
                        <h4 th:text="${b.title}"></h4>
                        <p th:text="${b.description}"></p>
                    </div>
                </div>
            </div>
        </section>


        <section class="challenge-section">
            <h3>μ§„ν–‰ μ¤‘μΈ μ±λ¦°μ§€</h3>

            <div class="my-challenge-grid">
                <div th:if="${#lists.isEmpty(challenges)}" class="empty-state">
                    μ§„ν–‰ μ¤‘μΈ μ±λ¦°μ§€κ°€ μ—†μµλ‹λ‹¤.
                </div>

                <div class="challenge-card-simple" th:each="c : ${challenges}">
                    <div class="card-top">
                        <h4 th:text="${c.title}"></h4>
                        <span class="percent-badge"
                              th:text="${(c.progressPercent != null ? c.progressPercent : 0) + '%'}"></span>
                    </div>

                    <p class="desc" th:text="${c.description}"></p>

                    <div class="progress-bar-wrapper">
                        <div class="fill"
                             th:style="'width:' + ${c.progressPercent != null ? c.progressPercent : 0} + '%'"></div>
                    </div>
                </div>
            </div>
        </section>

    </div>

</main>
</html>